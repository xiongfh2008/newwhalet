const translations = {
    'zh-CN': {
        // 导航栏
        'help': '帮助',
        'logout': '退出',
        'security': '安全设置',
        'authentication': '认证信息',
        'fees': '费率查询',
        'coupons': '我的优惠',
        'invitation': '我的邀请',
        'upgrade': '升级为企业',
        'announcement': '最新公告',
        'viewDetails': '查看详情',
        
        // 首页内容
        'quickNav': '快速导航',
        'manage': '管理',
        'todo': '待办事项',
        'viewAll': '查看全部',
        'recommend': '推荐有礼',
        'inviteFriends': '邀请好友注册',
        'exchangeRate': '汇率波动',
        'bankHoliday': '银行假期日历',
        'today': '今天',
        'last7Days': '近7天',
        'last30Days': '近30天',
        'recentHolidays': '近期银行假期',
        
        // 待办事项
        'supplementInfo': '收款账号尾号1234有一笔入账需要补充资料',
        'withdrawInfo': '提现付款到尾号1234需要补充资料',
        
        // 实名认证
        'completeVerification': '完成whalet易鲸账户实名认证解锁更多功能',
        'uncompleted': '未完成',
        'verificationDesc': '填写您的实名认证资料以解锁账户功能，我们会自动保存您的进度，方便您随时继续。',
        'verifyNow': '立即认证',

        // 广告横幅
        'globalPayment': '全球收款解决方案',
        'paymentFeatures': '支持200+国家地区 | 实时汇率 | 0手续费',
        'activateNow': '立即开通',
        'supportedCountries': '支持国家',
        'fastSettlement': '极速到账',

        // 快速导航项
        'platformCollection': '电商平台',
        'tradeCollection': '外贸收款',
        'independentSite': '独立站',
        'serviceTrade': '服务贸易',
        'withdrawal': '提现',
        'payment': '付款',
        'forex': '外汇兑换',
        'cards': '商务卡',
        'acquiring': '账单收款',

        // 快速导航管理
        'manageQuickNav': '管理快速导航',
        'selectQuickNav': '请选择要显示的快速导航入口（最多5个）',
        'maxQuickNavError': '最多只能选择5个快速导航入口',
        'cancel': '取消',
        'save': '保存',

        // 汇率波动
        'exchangeRateTitle': '汇率波动',
        'currencies': {
            'USD': 'USD/CNY',
            'EUR': 'EUR/CNY',
            'GBP': 'GBP/CNY',
            'JPY': 'JPY/CNY'
        },
        'exchangeRateInfo': '数据仅供参考，请以实际交易汇率为准，对于使用该汇率走势图所造成的影响，whalet不承担任何责任。',

        // 银行假期
        'bankHolidayTitle': '银行假期日历',
        'monthFormat': '{year}年{month}月',
        'weekDays': ['一', '二', '三', '四', '五', '六', '日'],
        'holidayLegend': '近期银行假期',
        'holidayUSD': '12月12日 - USD (美元) - 美国纪念日',
        'holidayGBP': '12月19日 - GBP (英镑) - 英国银行假期',
        'holidayEUR': '12月25日 - EUR (欧元) - 圣诞节',
        'holidayMulti': '12月26日 - USD, GBP, EUR - 多区域假期',

        // 左侧菜单
        'sideMenu': {
            'home': '首页',
            'accountOverview': '账户总览',
            'collection': '收款',
            'bills': '收单',
            'forex': '外汇兑换',
            'cards': '商务卡(鲸卡)',
            'withdrawal': '提现付款',
            'transactionQuery': '交易查询',
            'referralRewards': '推荐有礼',
            'userCenter': '用户中心'
        },

        // 左侧菜单翻译
        'menu_home': '首页',
        'menu_account_overview': '账户总览',
        'menu_acquiring': '收单',
        'menu_bill_collection': '账单收款',
        'menu_transaction_list': '交易清单',
        'menu_forex': '外汇兑换',
        'menu_business_card': '商务卡(鲸卡)',
        'menu_withdrawal_payment': '提现付款',
        'menu_withdrawal': '提现',
        'menu_payment': '付款',
        'menu_transaction_query': '交易查询',
        'menu_referral': '推荐有礼',
        'menu_user_center': '用户中心',
        'menu_security': '安全设置',
        'menu_authentication': '认证信息',
        'menu_fees': '费率查询',
        'menu_coupons': '我的优惠',
        'menu_collection': '收款',
        'menu_platform': '电商平台',
        'menu_independent': '独立站',
        'menu_service_trade': '服务贸易',
        'menu_trade_collection': '外贸收款',
        'menu_holder': '持有人',
        surveyTitle: '问卷调查',
        surveyDesc: '您的反馈对我们很重要，请花几分钟完成这份问卷',
        startSurvey: '开始问卷',
        skipSurvey: '暂时跳过',
    },
    'en': {
        // Navigation
        'help': 'Help',
        'logout': 'Logout',
        'security': 'Security Settings',
        'authentication': 'Authentication Info',
        'fees': 'Fee Rates',
        'coupons': 'My Coupons',
        'invitation': 'My Invitations',
        'upgrade': 'Upgrade to Enterprise',
        'announcement': 'Latest Announcement',
        'viewDetails': 'View Details',
        
        // Homepage content
        'quickNav': 'Quick Navigation',
        'manage': 'Manage',
        'todo': 'To-Do',
        'viewAll': 'View All',
        'recommend': 'Referral Rewards',
        'inviteFriends': 'Invite Friends',
        'exchangeRate': 'Exchange Rate',
        'bankHoliday': 'Bank Holiday Calendar',
        'today': 'Today',
        'last7Days': 'Last 7 Days',
        'last30Days': 'Last 30 Days',
        'recentHolidays': 'Recent Bank Holidays',
        
        // To-Do items
        'supplementInfo': 'Account ending in 1234 needs additional information for incoming payment',
        'withdrawInfo': 'Withdrawal to account ending in 1234 needs additional information',
        
        // Verification
        'completeVerification': 'Complete Whalet Account Verification to Unlock More Features',
        'uncompleted': 'Uncompleted',
        'verificationDesc': 'Fill in your verification information to unlock account features. We will automatically save your progress for you to continue anytime.',
        'verifyNow': 'Verify Now',

        // Ad Banner
        'globalPayment': 'Global Payment Solution',
        'paymentFeatures': 'Support 200+ Countries | Real-time Rates | Zero Fees',
        'activateNow': 'Activate Now',
        'supportedCountries': 'Supported Countries',
        'fastSettlement': 'Fast Settlement',

        // Quick Navigation Items
        'platformCollection': 'E-commerce Platform',
        'tradeCollection': 'Trade Collection',
        'independentSite': 'Independent Site',
        'serviceTrade': 'Service Trade',
        'withdrawal': 'Withdrawal',
        'payment': 'Payment',
        'forex': 'Forex Exchange',
        'cards': 'Business Cards',
        'acquiring': 'Bill Collection',

        // Quick Navigation Management
        'manageQuickNav': 'Manage Quick Navigation',
        'selectQuickNav': 'Please select quick navigation items to display (max 5)',
        'maxQuickNavError': 'Maximum 5 quick navigation items allowed',
        'cancel': 'Cancel',
        'save': 'Save',

        // Exchange Rate
        'exchangeRateTitle': 'Exchange Rate',
        'currencies': {
            'USD': 'USD/CNY',
            'EUR': 'EUR/CNY',
            'GBP': 'GBP/CNY',
            'JPY': 'JPY/CNY'
        },
        'exchangeRateInfo': 'Data is for reference only. Actual transaction rates may vary. Whalet is not responsible for any impact caused by using this exchange rate chart.',

        // Bank Holidays
        'bankHolidayTitle': 'Bank Holiday Calendar',
        'monthFormat': '{month}/{year}',
        'weekDays': ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        'holidayLegend': 'Recent Bank Holidays',
        'holidayUSD': 'Dec 12 - USD (US Dollar) - Memorial Day',
        'holidayGBP': 'Dec 19 - GBP (British Pound) - Bank Holiday',
        'holidayEUR': 'Dec 25 - EUR (Euro) - Christmas Day',
        'holidayMulti': 'Dec 26 - USD, GBP, EUR - Multi-region Holiday',

        // Side Menu
        'sideMenu': {
            'home': 'Home',
            'accountOverview': 'Account Overview',
            'collection': 'Collection',
            'bills': 'Bills',
            'forex': 'Forex Exchange',
            'cards': 'Business Cards',
            'withdrawal': 'Withdrawal',
            'transactionQuery': 'Transaction Query',
            'referralRewards': 'Referral Rewards',
            'userCenter': 'User Center'
        },

        // Left menu translations
        'menu_home': 'Home',
        'menu_account_overview': 'Account Overview',
        'menu_acquiring': 'Acquiring',
        'menu_bill_collection': 'Bill Collection',
        'menu_transaction_list': 'Transaction List',
        'menu_forex': 'Forex Exchange',
        'menu_business_card': 'Business Card (Whale Card)',
        'menu_withdrawal_payment': 'Withdrawal & Payment',
        'menu_withdrawal': 'Withdrawal',
        'menu_payment': 'Payment',
        'menu_transaction_query': 'Transaction Query',
        'menu_referral': 'Referral Rewards',
        'menu_user_center': 'User Center',
        'menu_security': 'Security Settings',
        'menu_authentication': 'Authentication Info',
        'menu_fees': 'Fee Query',
        'menu_coupons': 'My Coupons',
        'menu_collection': 'Collection',
        'menu_platform': 'E-commerce Platform',
        'menu_independent': 'Independent Site',
        'menu_service_trade': 'Service Trade',
        'menu_trade_collection': 'Trade Collection',
        'menu_holder': 'Holder',
        surveyTitle: 'Survey',
        surveyDesc: 'Your feedback is important to us. Please take a few minutes to complete this survey',
        startSurvey: 'Start Survey',
        skipSurvey: 'Skip for Now',
    }
};

// 获取当前语言
function getCurrentLanguage() {
    console.log('Getting current language:', localStorage.getItem('language') || 'zh-CN');
    return localStorage.getItem('language') || 'zh-CN';
}

// 设置语言
function setLanguage(lang) {
    localStorage.setItem('language', lang);
    document.documentElement.lang = lang;
    console.log('Language set to:', lang);
}

// 更新页面内容
function updatePageContent() {
    console.log('Updating page content');
    const currentLang = getCurrentLanguage();
    const elements = document.querySelectorAll('[data-i18n]');
    
    elements.forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (key.includes('.')) {
            // 处理嵌套的翻译键
            const [category, subKey] = key.split('.');
            if (translations[currentLang][category] && translations[currentLang][category][subKey]) {
                element.textContent = translations[currentLang][category][subKey];
            }
        } else if (translations[currentLang] && translations[currentLang][key]) {
            element.textContent = translations[currentLang][key];
        }
    });
}

// 初始化页面语言
console.log('Initializing page language');
document.addEventListener('DOMContentLoaded', () => {
    const currentLang = getCurrentLanguage();
    document.documentElement.lang = currentLang;
    updatePageContent();
});

// 导出函数供其他文件使用
window.getCurrentLanguage = getCurrentLanguage;
window.setLanguage = setLanguage;
window.updatePageContent = updatePageContent;
window.translations = translations; 